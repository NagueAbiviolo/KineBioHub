<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adicionar Questionário</title>
    <style>
      .pergunta-container {
        margin-bottom: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .alternativa {
        margin-left: 20px;
      }
    </style>
  </head>
  <body>
    <h2>Adicionar Questionário</h2>
    <form method="post">
      {% csrf_token %}
      <label for="conteudo">Conteúdo:</label>
      <select name="conteudo" required>
        <option value="">Selecione um conteúdo</option>
        {% for conteudo in conteudos %}
        <option value="{{ conteudo.id }}">{{ conteudo.titulo }}</option>
        {% endfor %}
      </select>
      <br /><br />

      <label for="nome">Nome do Questionário:</label>
      <input type="text" name="nome" required />
      <br /><br />

      <label for="numero_perguntas">Número de Perguntas:</label>
      <input
        type="number"
        id="numero_perguntas"
        name="numero_perguntas"
        min="1"
        max="10"
        required
      />
      <button type="button" onclick="adicionarPerguntas()">
        Adicionar Perguntas
      </button>
      <br /><br />

      <div id="perguntas"></div>

      <button type="submit">Adicionar Questionário</button>
    </form>

    <script>
      function adicionarPerguntas() {
        const numeroPerguntas =
          document.getElementById("numero_perguntas").value;
        const perguntasContainer = document.getElementById("perguntas");
        perguntasContainer.innerHTML = ""; // Limpa as perguntas anteriores

        for (let i = 0; i < numeroPerguntas; i++) {
          const perguntaDiv = document.createElement("div");
          perguntaDiv.classList.add("pergunta-container");

          // Campo para enunciado da pergunta
          const enunciadoLabel = document.createElement("label");
          enunciadoLabel.textContent = `Pergunta ${i + 1}: `;
          const enunciadoInput = document.createElement("input");
          enunciadoInput.type = "text";
          enunciadoInput.name = `pergunta_${i}`;
          enunciadoInput.required = true;

          perguntaDiv.appendChild(enunciadoLabel);
          perguntaDiv.appendChild(enunciadoInput);
          perguntaDiv.appendChild(document.createElement("br"));

          // Campos para as alternativas
          for (let j = 0; j < 4; j++) {
            const alternativaDiv = document.createElement("div");
            alternativaDiv.classList.add("alternativa");

            const alternativaLabel = document.createElement("label");
            alternativaLabel.textContent = `Alternativa ${j + 1}: `;
            const alternativaInput = document.createElement("input");
            alternativaInput.type = "text";
            alternativaInput.name = `alternativa_${i}_${j}`;
            alternativaInput.required = true;

            const corretaInput = document.createElement("input");
            corretaInput.type = "radio";
            corretaInput.name = `correta_${i}`;
            corretaInput.value = j;
            corretaInput.required = true;

            const corretaLabel = document.createElement("label");
            corretaLabel.textContent = "Correta";

            alternativaDiv.appendChild(alternativaLabel);
            alternativaDiv.appendChild(alternativaInput);
            alternativaDiv.appendChild(corretaInput);
            alternativaDiv.appendChild(corretaLabel);
            perguntaDiv.appendChild(alternativaDiv);
          }

          perguntasContainer.appendChild(perguntaDiv);
        }
      }
    </script>
  </body>
</html>
